name: Xcode Cloud Build

# This workflow configuration helps Xcode Cloud find the correct project
# Updated to use the correct scheme name: App

settings:
  xcode:
    project: ios/App/App.xcodeproj
    workspace: ios/App/App.xcworkspace
    scheme: App  # Previously was looking for "Introgy"

# Define the build steps
steps:
  - name: Build and Archive
    build:
      project: ios/App/App.xcodeproj
      workspace: ios/App/App.xcworkspace
      scheme: App  # This must match an existing scheme
      destination: 'platform=iOS Simulator,name=iPhone 15'
      
# Pre-build script to ensure permissions are correct and install dependencies
pre_build_script: ./xcode_cloud_pre_build.sh