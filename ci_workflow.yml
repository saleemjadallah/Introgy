name: Xcode Cloud Build

# This workflow configuration helps Xcode Cloud find the correct project
# Define the correct paths for your Xcode project/workspace

settings:
  xcode:
    project: ios/App/App.xcodeproj
    workspace: ios/App/App.xcworkspace
    scheme: App

# Define the build steps
steps:
  - name: Build and Archive
    build:
      project: ios/App/App.xcodeproj
      workspace: ios/App/App.xcworkspace
      scheme: App
      destination: 'platform=iOS Simulator,name=iPhone 15'
      
# Pre-build script to ensure permissions are correct
pre_build_script: ./ci_scripts.sh